# Portfolio - Micro Frontend Monorepo

![portfolio-mono](https://github.com/user-attachments/assets/a228aa0a-bdbf-47d1-94fb-60f7b883a435)
ê° ë²„ì „ë³„ ë…ë¦½ëœ í™˜ê²½ì„ êµ¬ì¶•í•˜ê³ , ìƒˆë¡œìš´ ê¸°ìˆ  ìŠ¤íƒì„ í™œìš©ì„ ìœ„í•œ MFE ëª¨ë…¸ë ˆí¬ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤

## ğŸŒŸ ì£¼ìš”ê¸°ëŠ¥

- Turborepoì™€ Module Federationì„ í™œìš©í•œ MFE ëª¨ë…¸ë ˆí¬ êµ¬ì¡°ë¡œ, ë…ë¦½ì  í™˜ê²½ì„ ë³´ì¥í•©ë‹ˆë‹¤.
- ìƒˆë¡œìš´ ì•±ì„ clië¥¼ í†µí•´ ìŠ¤ìºí´ë”©í•˜ì—¬ ì¶”ê°€í•©ë‹ˆë‹¤.
- assetì˜ ì ˆëŒ€ê²½ë¡œ ì§€ì› ë° nested route ì§€ì›ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤
- [type-build-util](https://github.com/minr2kb/portfolio-mono/tree/main/packages/type-build-util)ì„ ì œì‘í•˜ì—¬ ë¹Œë“œíƒ€ì„ì— ë¦¬ëª¨íŠ¸ì•±ì˜ íƒ€ì…ì„ ì¶”ì¶œí•´ëƒ…ë‹ˆë‹¤.

## ğŸ¯ ê¸°ìˆ ì  íŠ¹ì§•

### 1. í™•ì¥ì„± ìˆëŠ” ëª¨ë…¸ë ˆí¬ êµ¬ì¡°

- PNPM + Turborepoë¥¼ í™œìš©í•œ ëª¨ë…¸ë ˆí¬ í™˜ê²½ êµ¬ì„±
- í…œí”Œë¦¿ ê¸°ë°˜ ìŠ¤ìºí´ë”© clië¡œ ìƒˆë¡œìš´ ë²„ì „ì˜ í¬íŠ¸í´ë¦¬ì˜¤ ì•±ì„ ë…ë¦½ í™˜ê²½ì—ì„œ ë¹ ë¥´ê²Œ ìƒì„± ê°€ëŠ¥
- ìì²´ ì œì‘ type-build-util íŒ¨í‚¤ì§€ë¥¼ í†µí•œ ë¦¬ëª¨íŠ¸ ì•± íƒ€ì… ì •ì˜ ìë™ ì¶”ì¶œ

### 2. ë§ˆì´í¬ë¡œ í”„ë¡ íŠ¸ì—”ë“œ ì•„í‚¤í…ì²˜

- Vite Module Federationì„ í™œìš©í•œ ëŸ°íƒ€ì„ í†µí•©
- ê° ë²„ì „ì˜ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ë…ë¦½ì ìœ¼ë¡œ ê°œë°œ/ë°°í¬ ê°€ëŠ¥
- Cache-controlì„ í†µí•œ ë¦¬ëª¨íŠ¸ ì•± ë³€ê²½ì‚¬í•­ ì¦‰ì‹œ ë°˜ì˜

### 3. ìµœì í™”ëœ ê°œë°œ ê²½í—˜

- ë…ë¦½ì ì¸ ê°œë°œ ì„œë²„ êµ¬ë™ìœ¼ë¡œ ë¹ ë¥¸ HMR ì§€ì›
- ê³µí†µ í…œí”Œë¦¿ ìŠ¤ìºí´ë”©ì„ í†µí•œ ì¼ê´€ëœ í”„ë¡œì íŠ¸ êµ¬ì¡°
- Firebase Hostingì„ í†µí•´ 4ê°œì˜ CDN ê¸°ë°˜ ë°°í¬
- `getAssetsUrl()` ìœ í‹¸ì„ í†µí•´ remoteì•±ì˜ ì—ì…‹ì„ ì•ˆì •ì ìœ¼ë¡œ ë¡œë“œ

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```

â”œâ”€â”€ apps/
â”‚ â”œâ”€â”€ host/ # í˜¸ìŠ¤íŠ¸ ì•± (ì»¨í…Œì´ë„ˆ)
â”‚ â”œâ”€â”€ v1/ # v1 ë¦¬ëª¨íŠ¸ ì•±
â”‚ â”œâ”€â”€ v2/ # v2 ë¦¬ëª¨íŠ¸ ì•±
â”‚ â”œâ”€â”€ v3/ # v3 ë¦¬ëª¨íŠ¸ ì•±
â”‚ â””â”€â”€ v4/ # v4 ë¦¬ëª¨íŠ¸ ì•±
â”œâ”€â”€ templates/
â”‚ â”œâ”€â”€ react-vite/ # React + Vite ê¸°ë°˜ í…œí”Œë¦¿
â”‚ â””â”€â”€ react-vite-mui/ # React + Vite + MUI ê¸°ë°˜ í…œí”Œë¦¿
â”œâ”€â”€ packages/
â”‚ â”œâ”€â”€ shared/ # ê³µí†µ ìœ í‹¸ë“¤(WIP)
â”‚ â””â”€â”€ type-build-util/ # ë¦¬ëª¨íŠ¸ì•± íƒ€ì… ì¶”ì¶œì„ ìœ„í•œ ìœ í‹¸
â”œâ”€â”€ scripts/
â”‚ â””â”€â”€ create-app.js # í…œí”Œë¦¿ ìŠ¤ìºí´ë”©ì„ ìœ„í•œ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ turbo.json # Turborepo ì„¤ì •
â”œâ”€â”€ firebase.json # firebase í˜¸ìŠ¤íŒ… ì„¤ì •
â”œâ”€â”€ package.json # ë£¨íŠ¸ íŒ¨í‚¤ì§€ ì„¤ì •
â””â”€â”€ pnpm-workspace.yaml # PNPM ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì„¤ì •
```

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

- **íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €**: PNPM
- **ë¹Œë“œ ë„êµ¬**: Vite
- **í”„ë ˆì„ì›Œí¬**: React
- **ì–¸ì–´**: TypeScript
- **ëª¨ë…¸ë ˆí¬ ë„êµ¬**: Turborepo
- **ëª¨ë“ˆ í˜ë”ë ˆì´ì…˜**: Vite Module Federation Plugin

## ğŸš€ ì‹œì‘í•˜ê¸°

### 1. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
pnpm install
```

### 2. ë¹Œë“œ

```bash
# í”„ë¡œë•ì…˜ ë¹Œë“œ
pnpm build

# ê°œë°œ ë¹Œë“œ
pnpm build:dev
```

### 3. ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
# ê° standalone
pnpm dev:host
pnpm dev:v1
pnpm dev:v2
pnpm dev:v3

# ë™ì‹œ êµ¬ë™
pnpm start
```

### ë°°í¬

```bash
# ë”°ë¡œ ë°°í¬
pnpm run deploy:host
pnpm run deploy:v1
pnpm run deploy:v2
pnpm run deploy:v3

# ë™ì‹œ ë°°í¬
pnpm run deploy
```

## ğŸ“² ì•± êµ¬ì¡°

### Host App (Container)

- ê²½ë¡œ: `apps/host`
- ì—­í• : ë‹¤ë¥¸ ë§ˆì´í¬ë¡œ í”„ë¡ íŠ¸ì—”ë“œ ì•±ë“¤ì„ í†µí•©í•˜ëŠ” ì»¨í…Œì´ë„ˆ ì• í”Œë¦¬ì¼€ì´ì…˜
- í¬íŠ¸: 1129

### Remote App

- ê²½ë¡œ: `apps/v1` `apps/v2` `apps/v3`, ...
- ì—­í• : ê° ë²„ì „ë³„ ë¦¬ëª¨íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜
- í¬íŠ¸: 5001, 5002, 5003, ...

## ğŸ–¼ï¸ í…œí”Œë¦¿

### ë¦¬ëª¨íŠ¸ì•± í…œí”Œë¦¿

- ê²½ë¡œ: `templates/*`
- ì„¤ëª…: ìƒˆë¡œìš´ ë§ˆì´í¬ë¡œ í”„ë¡ íŠ¸ì—”ë“œ ì•±ì„ ìƒì„±í•  ë•Œ ì‚¬ìš©ë˜ëŠ” ê¸°ë³¸ í…œí”Œë¦¿
- í¬í•¨ëœ ì„¤ì •:
  - TypeScript ì„¤ì •
  - Vite ì„¤ì •
  - Module Federation ì„¤ì •
  - MUI ë“± ë””ìì¸ íŒ¨í‚¤ì§€ ì„¤ì •
  - ê¸°ë³¸ íŒ¨í‚¤ì§€ êµ¬ì„±

## â˜•ï¸ ê°œë°œ ê°€ì´ë“œ

### ìƒˆë¡œìš´ ë²„ì „ ë¦¬ëª¨íŠ¸ ì•± ì¶”ê°€í•˜ê¸°

```bash
pnpm create-app
```

1. `create-app` ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰(ì´ë¦„, í¬íŠ¸ ì„¤ì •)
2. host ì•±ì˜ `vite.config.js`ì— remoteEntry ì¶”ê°€
3. `host/src/AppRoutes.tsx` ë‚´ì— ì¤‘ì²© ë¼ìš°í„° ì¶”ê°€
4. `.env` ë‚´ base_url ì‘ì„±
5. ìƒì„±ëœ remoteì•±ì˜ `vite.config.js` ë‚´ base í™˜ê²½ë³€ìˆ˜ ì‘ì„±
6. `firebase.json`, `.firebaserc` ë‚´ì— ë°°í¬ config ì¶”ê°€

### ì£¼ì˜ì‚¬í•­

1. assetì€ ê° ì•±ì˜ public ë‚´ë¶€ì— ìœ„ì¹˜ì‹œí‚¤ë˜, ìƒëŒ€ ê²½ë¡œì˜ ê²½ìš° ë°˜ë“œì‹œ ë¹Œë“œíƒ€ì„ ê²½ë¡œ ë³€í™˜ì„ ìœ„í•´ `@/utils` ë‚´ì˜ `getAssetsUrl()`ë¡œ ê°ì‹¸ì„œ ì‘ì„±í•œë‹¤. (hostì˜ asset ì‚¬ìš©ì‹œ ê·¸ëƒ¥ ìƒëŒ€ê²½ë¡œë§Œ ì‘ì„±)
2. hostì•± êµ¬ë™ì‹œì—ëŠ” ê° remoteì•±ì˜ ë¹Œë“œ ê²°ê³¼ë¬¼(`dist/assets/remoteEntry.js`)ì´ í•„ìš”í•˜ê¸°ì— previewë¥¼ í†µí•´ êµ¬ë™ëœë‹¤. ì´ ë•Œ, ë¡œì»¬ ì ˆëŒ€ ì£¼ì†Œ ì‚¬ìš©ì„ ìœ„í•´ `pnpm build:dev`ë¡œ ë¹Œë“œê°€ ë˜ë©°, HMRì‘ë™ì´ ì•ˆëœë‹¤.
3. ê° remoteì•±ì€ ë…ë¦½ì ìœ¼ë¡œ ì‘ë™ ê°€ëŠ¥í•˜ë©° `dev` ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•´ ê°œë°œ ê°€ëŠ¥í•˜ë‹¤.
4. ë°°í¬ëŠ” ë§¤ë‰´ì–¼ ë¡œì»¬ ë°°í¬ë¡œ ëŒì•„ê°€ê¸°ì— ë°˜ë“œì‹œ í”„ë¡œë•ì…˜ ë¹Œë“œê°€ ì„ í–‰ë˜ì–´ì•¼ í•œë‹¤.

## TO-DO

- ê³µí†µ ë¡œì§(ë°ì´í„°,íƒ€ì…,ì—ì…‹ ë“±) íŒ¨í‚¤ì§€ ë¶„ë¦¬
- íŒ¨í‚¤ì§€ ì¤‘ë³µë¡œë“œ ë°©ì§€ & lazy load
- ë°°í¬ ìë™í™”

## ê³ ë¯¼í•˜ë˜ ë¶€ë¶„

- ê° ì•± ë¼ìš°íŠ¸ë³„ ê¸€ë¡œë²Œ ìŠ¤íƒ€ì¼ì´ ê°„ì„­ -> ì•±ì„ ì™„ì „ lazyë¡œë“œë¡œ ì „í™˜

## ğŸ‘¨â€ğŸ’» ê°œë°œì

- Kyungbae Min - [GitHub](https://github.com/minr2kb)
- Email: kbmin1129@gmail.com
